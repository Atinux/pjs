#!/usr/bin/env node

var program = require('commander'),
    fs = require('fs'),
    path = require('path'),
    server = require('../lib/server'),
    dir,
    lstat;

program.usage('[dir] [options]')
program.option('-p, --port <port>', 'Port where the PJS will listen')
program.parse(process.argv);
dir = program.args[0] || './';
try { lstat = fs.lstatSync(dir) } catch (e) { lstat = null; }
if (!lstat || !lstat.isDirectory())
  return console.log(folder + ' is not a directory.');

server(path.join(process.cwd(), dir), program.port);
